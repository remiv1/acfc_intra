<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3"></div>
        <h2>Liste des utilisateurs</h2>
        <a href="{{ url_for('admin.add_user') }}" class="btn btn-primary">Ajouter un utilisateur</a>
    </div>
    {% from '_macros.html' import csrf_field %}
    <form method="post" action="{{ url_for('admin.users_action') }}"></form>
        {{ csrf_field() }}
        <table class="table table-striped">
            <thead>
                <tr>
                    <th></th>
                    <th>Prénom</th>
                    <th>Nom</th>
                    <th>Pseudo</th>
                    <th>Email</th>
                    <th>Statut</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    <td>
                        <input type="radio" name="selected_user" value="{{ user.id }}">
                    </td>
                    <td>{{ user.nom }}</td>
                    <td>{{ user.prenom }}</td>
                    <td>{{ user.pseudo }}</td>
                    <td>{{ user.email }}</td>
                    <td>
                        {% if user.is_active %}
                            <span class="badge bg-success">Actif</span>
                        {% else %}
                            <span class="badge bg-secondary">Désactivé</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if user.is_active %}
                        <button type="submit" name="action" value="disable-{{ user.id }}" class="btn btn-warning btn-sm">Désactiver</button>
                        <button type="submit" name="action" value="forcepw-{{ user.id }}" class="btn btn-secondary btn-sm">Changer le Mdp</button>
                        {% else %}
                        <button type="submit" name="action" value="enable-{{ user.id }}" class="btn btn-success btn-sm">Activer</button>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </form>
</div>
